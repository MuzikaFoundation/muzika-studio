{
  "productName": "Muzika",
  "directories": {
    "output": "../../app-builds"
  },
  "nsis": {
    "oneClick": false,
    "allowToChangeInstallationDirectory": true
  },
  "asar": true,
  "win": {
    "icon": "assets/muzika.png",
    "target": [
      "zip",
      "nsis"
    ],
    "files": [
      "!node_modules/ffmpeg-static/bin/win32/!(${arch}${/*})",
      "node_modules/ffmpeg-static/bin/win32/${arch}${/*}",
      "!node_modules/ffmpeg-static/bin/darwin${/*}",
      "!node_modules/ffmpeg-static/bin/linux${/*}",
      "!node_modules/ffprobe-static/bin/win32/!(${arch}${/*})",
      "node_modules/ffprobe-static/bin/win32/${arch}${/*}",
      "!node_modules/ffprobe-static/bin/darwin${/*}",
      "!node_modules/ffprobe-static/bin/linux${/*}"
    ],
    "extraFiles": [
      {
        "from": "/${env.MAGICK_HOME}",
        "to": ".",
        "filter": "./*(CORE_RL_*.dll|msvcr120.dll|msvcp120.dll|vcomp120.dll)"
      }
    ],
    "publish": [{
      "provider": "s3",
      "bucket": "muzika-release",
      "path": "/studio/win-${arch}"
    }]
  },
  "mac": {
    "icon": "assets/muzika.png",
    "target": [
      "dmg",
      "zip"
    ],
    "files": [
      "!node_modules/ffmpeg-static/bin/darwin/!(${arch}${/*})",
      "node_modules/ffmpeg-static/bin/darwin/${arch}${/*}",
      "!node_modules/ffmpeg-static/bin/win32${/*}",
      "!node_modules/ffmpeg-static/bin/linux${/*}",
      "!node_modules/ffprobe-static/bin/darwin/!(${arch}${/*})",
      "node_modules/ffprobe-static/bin/darwin/${arch}${/*}",
      "!node_modules/ffprobe-static/bin/win32${/*}",
      "!node_modules/ffprobe-static/bin/linux${/*}"
    ],
    "publish": [{
      "provider": "s3",
      "bucket": "muzika-release",
      "path": "/studio/darwin"
    }]
  },
  "linux": {
    "icon": "assets/muzika.png",
    "target": [
      "AppImage"
    ],
    "files": [
      "!node_modules/ffmpeg-static/bin/linux/!(${arch}${/*})",
      "node_modules/ffmpeg-static/bin/linux/${arch}${/*}",
      "!node_modules/ffmpeg-static/bin/darwin${/*}",
      "!node_modules/ffmpeg-static/bin/win32${/*}",
      "!node_modules/ffprobe-static/bin/linux/!(${arch}${/*})",
      "node_modules/ffprobe-static/bin/linux/${arch}${/*}",
      "!node_modules/ffprobe-static/bin/darwin${/*}",
      "!node_modules/ffprobe-static/bin/win32${/*}"
    ],
    "publish": [{
      "provider": "s3",
      "bucket": "muzika-release",
      "path": "/studio/linux-${arch}"
    }]
  },
  "files": [
    "main.js",
    "src/**/*.js",
    {
      "from": "../../dist/muzika-studio-renderer",
      "to": "./renderer"
    }
  ]
}
